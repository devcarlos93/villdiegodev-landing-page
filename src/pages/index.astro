---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Hero from '../components/Hero.astro';
import About from '../components/About.astro';
import Experience from '../components/Experience.astro';
import Projects from '../components/Projects.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Carlos Villadiego - Developer Portfolio">
  <Navigation />
  <main>
    <Hero />
    <About />
    <Experience />
    <Projects />
  </main>
  <Footer />
</Layout>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Hero animations
  gsap.from('.hero-content', {
    opacity: 0,
    y: 50,
    duration: 1,
    ease: 'power3.out'
  });

  gsap.from('.hero-image', {
    opacity: 0,
    scale: 0.8,
    duration: 1,
    delay: 0.3,
    ease: 'power3.out'
  });

  gsap.from('.scroll-indicator', {
    opacity: 0,
    y: -20,
    duration: 1,
    delay: 0.8,
    ease: 'power2.out'
  });

  // Section title animations
  gsap.utils.toArray('.section-title').forEach((title: any) => {
    gsap.from(title, {
      scrollTrigger: {
        trigger: title,
        start: 'top 80%',
        toggleActions: 'play none none reverse'
      },
      opacity: 0,
      y: 30,
      duration: 0.8,
      ease: 'power2.out'
    });
  });

  // About section animations
  gsap.from('.about-content', {
    scrollTrigger: {
      trigger: '.about-content',
      start: 'top 80%',
      toggleActions: 'play none none reverse'
    },
    opacity: 0,
    x: -50,
    duration: 0.8,
    ease: 'power2.out'
  });

  gsap.from('.about-skills', {
    scrollTrigger: {
      trigger: '.about-skills',
      start: 'top 80%',
      toggleActions: 'play none none reverse'
    },
    opacity: 0,
    x: 50,
    duration: 0.8,
    ease: 'power2.out'
  });

  // Experience timeline stagger
  gsap.utils.toArray('.experience-item').forEach((item: any, index: number) => {
    gsap.from(item, {
      scrollTrigger: {
        trigger: item,
        start: 'top 85%',
        toggleActions: 'play none none reverse'
      },
      opacity: 0,
      y: 30,
      duration: 0.6,
      delay: index * 0.1,
      ease: 'power2.out'
    });
  });

  // Projects grid stagger
  gsap.utils.toArray('.project-card').forEach((card: any, index: number) => {
    gsap.from(card, {
      scrollTrigger: {
        trigger: card,
        start: 'top 85%',
        toggleActions: 'play none none reverse'
      },
      opacity: 0,
      y: 50,
      scale: 0.9,
      duration: 0.6,
      delay: (index % 3) * 0.1,
      ease: 'power2.out'
    });
  });

  // Parallax effect for hero background
  gsap.to('.hero-gradient', {
    scrollTrigger: {
      trigger: '#inicio',
      start: 'top top',
      end: 'bottom top',
      scrub: true
    },
    y: 200,
    ease: 'none'
  });
</script>